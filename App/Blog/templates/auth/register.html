{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Register{% endblock %}</h1>
{% endblock %}

{% block content %}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="flash {{ category }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}
  
  <form method="post">
    <div class="form-group">
      <label for="username">Username</label>
      <input name="username" id="username" required minlength="3" 
             pattern="[a-zA-Z0-9_]+" title="Username can only contain letters, numbers, and underscores">
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" name="email" id="email" required>
    </div>

    <div class="form-group">
      <label for="password">Password</label>
      <input type="password" name="password" id="password" required minlength="8"
             pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
             title="Must contain at least one number, one uppercase and lowercase letter, and at least 8 characters">
      <small class="password-help">
        Password must be at least 8 characters long and contain:
        <ul>
          <li>At least one uppercase letter</li>
          <li>At least one lowercase letter</li>
          <li>At least one number</li>
        </ul>
      </small>
    </div>

    <input type="submit" value="Register" class="button">
  </form>
{% endblock %}
